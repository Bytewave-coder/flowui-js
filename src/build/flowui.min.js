(function (window, document) {
  "use strict";

  if (window.FlowUI) return;

  const FlowUI = {};

  FlowUI._injectCSS = function (css) {
    if (!css || document.getElementById("flowui-style")) return;
    const style = document.createElement("style");
    style.id = "flowui-style";
    style.textContent = css;
    document.head.appendChild(style);
  };

  FlowUI._ready = function (fn) {
    if (document.readyState !== "loading") fn();
    else document.addEventListener("DOMContentLoaded", fn);
  };

  FlowUI.init = function () {
    FlowUI._ready(() => {
      FlowUI.sections && FlowUI.sections();
      FlowUI.buttons && FlowUI.buttons();
      FlowUI.text && FlowUI.text();
      FlowUI.animation && FlowUI.animation();
    });
  };

  /* =========================
     SECTIONS MODULE
  ========================= */

  FlowUI.sections = function () {
    FlowUI._injectCSS(`
:root {
  --flow-bg-main: radial-gradient(circle at top, #141414 0%, #050505 60%);
  --flow-card-bg: #161616;
  --flow-glass-bg: rgba(255,255,255,0.08);
  --flow-primary: #7f7cff;
  --flow-secondary: #00c6ff;
  --flow-accent: #ff6ec7;
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--flow-bg-main);
  color: #eaeaea;
  line-height: 1.65;
}

section {
  max-width: 1200px;
  margin: 0 auto;
  padding: clamp(48px, 8vw, 96px) 20px;
}

.flow-hero {
  min-height: 85vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 24px;
  border-radius: 28px;
  background: linear-gradient(135deg, #7f7cff, #b983ff);
  color: #fff;
}

.flow-card {
  background: var(--flow-card-bg);
  border-radius: 22px;
  padding: 28px;
  box-shadow: 0 20px 40px rgba(0,0,0,.45);
}

.flow-glass {
  background: var(--flow-glass-bg);
  backdrop-filter: blur(18px);
  border-radius: 28px;
  padding: 32px;
}
`);
  };

  /* =========================
     BUTTONS MODULE
  ========================= */

  FlowUI.buttons = function () {
    FlowUI._injectCSS(`
.flow-btn {
  padding: 14px 28px;
  border-radius: 999px;
  font-weight: 600;
  cursor: pointer;
  border: none;
  transition: transform .25s ease, box-shadow .25s ease;
}

.flow-primary {
  background: linear-gradient(135deg, #7f7cff, #b983ff);
  color: #fff;
  box-shadow: 0 12px 30px rgba(127,124,255,.45);
}

.flow-secondary {
  background: linear-gradient(135deg, #00c6ff, #0072ff);
  color: #fff;
}

.flow-neon {
  background: #000;
  color: #0ff;
  box-shadow: 0 0 20px #0ff;
}

.flow-ghost {
  background: transparent;
  border: 1px solid rgba(255,255,255,.25);
  color: #fff;
}

.flow-btn:hover {
  transform: scale(1.05);
}
`);
  };

  /* =========================
     TEXT MODULE
  ========================= */

  FlowUI.text = function () {
    FlowUI._injectCSS(`
.flow-title {
  font-size: clamp(2.4rem, 6vw, 3.8rem);
  font-weight: 800;
  letter-spacing: -0.035em;
}

.flow-subtitle {
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  font-weight: 700;
}

.flow-text {
  max-width: 68ch;
  line-height: 1.7;
}

.flow-muted {
  opacity: 0.6;
  font-size: .95rem;
}
`);
  };

  /* =========================
     ANIMATION MODULE
  ========================= */

  FlowUI.animation = function () {
    const reduce =
      window.matchMedia &&
      window.matchMedia("(prefers-reduced-motion: reduce)").matches;

    if (reduce) return;

    FlowUI._injectCSS(`
.flow-reveal {
  opacity: 0;
  transform: translateY(24px);
  transition: all .8s cubic-bezier(.2,.7,.2,1);
}

.flow-reveal.show {
  opacity: 1;
  transform: none;
}
`);

    const items = document.querySelectorAll(
      ".flow-fade,.flow-slide,.flow-scale"
    );

    items.forEach(el => el.classList.add("flow-reveal"));

    const io = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add("show");
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.15 });

    items.forEach(el => io.observe(el));
  };

  window.FlowUI = FlowUI;

})(window, document);
